@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model USASymbol.Models.ViewModels.StatesListingViewModel

@{
    ViewData["Title"] = "All 50 U.S. States";
}

<!-- HERO SECTION -->
<section class="bg-gradient-to-r from-blue-900 to-blue-700 text-white py-16">
    <div class="max-w-7xl mx-auto px-4 text-center">
        <h1 class="text-4xl md:text-5xl font-bold mb-4">All 50 U.S. States</h1>
        <p class="text-xl text-blue-100 mb-6">
            Explore each state's unique symbols, history, and heritage
        </p>
    </div>
</section>

<!-- FILTER SECTION -->
<section class="bg-white border-b sticky top-16 z-40 py-4">
    <div class="max-w-7xl mx-auto px-4">
        <!-- Mobile Layout -->
        <div class="md:hidden space-y-3">
            <div class="flex items-center justify-between">
                <span class="text-gray-600 font-medium text-sm">Filter by Region:</span>
                <div class="text-gray-600 text-sm">
                    <span class="font-semibold">@Model.States.Count</span> states
                </div>
            </div>
            <div class="flex gap-2 overflow-x-auto pb-2">
                <a href="/states" class="px-4 py-2 rounded-lg font-medium transition whitespace-nowrap text-sm @(string.IsNullOrEmpty(Model.SelectedRegion) ? "bg-blue-600 text-white" : "bg-gray-100 text-gray-700")">
                    All States
                </a>
                @foreach (var region in Model.Regions)
                {
                    <a href="/states?region=@region" class="px-4 py-2 rounded-lg font-medium transition whitespace-nowrap text-sm @(Model.SelectedRegion == region ? "bg-blue-600 text-white" : "bg-gray-100 text-gray-700")">
                        @region
                    </a>
                }
            </div>
        </div>

        <!-- Desktop Layout -->
        <div class="hidden md:flex items-center justify-between gap-4">
            <div class="flex items-center gap-2">
                <span class="text-gray-600 font-medium">Filter by Region:</span>
                <div class="flex gap-2">
                    <a href="/states" class="px-4 py-2 rounded-lg font-medium transition @(string.IsNullOrEmpty(Model.SelectedRegion) ? "bg-blue-600 text-white" : "bg-gray-100 text-gray-700 hover:bg-gray-200")">
                        All States
                    </a>
                    @foreach (var region in Model.Regions)
                    {
                        <a href="/states?region=@region" class="px-4 py-2 rounded-lg font-medium transition @(Model.SelectedRegion == region ? "bg-blue-600 text-white" : "bg-gray-100 text-gray-700 hover:bg-gray-200")">
                            @region
                        </a>
                    }
                </div>
            </div>
            <div class="text-gray-600">
                <span class="font-semibold">@Model.States.Count</span> states
            </div>
        </div>
    </div>
</section>

<!-- STATES GRID -->
<section class="py-12 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4">
        @if (Model.States.Any())
        {
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                @foreach (var state in Model.States)
                {
                    <a href="/states/@state.Slug" class="bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden group">
                        <!-- Flag/Image -->
                        <div class="aspect-video bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center relative overflow-hidden">
                            @{
                                // Используем slug или abbreviation в зависимости от твоих файлов
                                var flagPath = $"/images/states/flags/small/{state.Abbreviation.ToLower()}.webp";
                            }
                            <img src="@flagPath"
                                 alt="@state.Name flag"
                                 class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                                 onerror="this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"
                                 loading="lazy">

                            <!-- Fallback если картинка не найдена -->
                            <div class="w-full h-full flex items-center justify-center" style="display:none;">
                                <span class="text-4xl font-bold text-white">@state.Abbreviation</span>
                            </div>

                            <!-- Region Badge -->
                            <div class="absolute top-2 right-2 bg-white/90 backdrop-blur-sm px-2 py-1 rounded text-xs font-semibold text-gray-700">
                                @state.Region
                            </div>
                        </div>

                        <!-- Content -->
                        <div class="p-4">
                            <h3 class="font-bold text-lg mb-1 text-gray-900 group-hover:text-blue-600 transition">
                                @state.Name
                            </h3>
                            <div class="text-sm text-gray-600 space-y-1">
                                <div class="flex items-center">
                                    <svg class="w-4 h-4 mr-1 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span>@state.Capital</span>
                                </div>
                                @if (state.Population.HasValue)
                                {
                                    <div class="flex items-center">
                                        <svg class="w-4 h-4 mr-1 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
                                        </svg>
                                        <span>@state.Population.Value.ToString("N0")</span>
                                    </div>
                                }
                            </div>

                            <!-- View Symbols Link -->
                            <div class="mt-3 pt-3 border-t border-gray-100">
                                <span class="text-blue-600 text-sm font-semibold group-hover:underline">
                                    View Symbols →
                                </span>
                            </div>
                        </div>
                    </a>
                }
            </div>
        }
        else
        {
            <div class="text-center py-12">
                <p class="text-gray-500 text-lg">No states found for this region.</p>
            </div>
        }
    </div>
</section>

<!-- INFO SECTION -->
<section class="py-16 bg-white">
    <div class="max-w-4xl mx-auto px-4 text-center">
        <h2 class="text-3xl font-bold mb-4">Explore State Symbols</h2>
        <p class="text-gray-600 mb-8">
            Each U.S. state has chosen unique symbols that represent its culture, history, and natural heritage.
            Click on any state above to discover its official bird, flower, tree, flag, and many more symbols.
        </p>
        <a href="/symbols" class="inline-block bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition">
            Browse All Symbol Types →
        </a>
    </div>
</section>